
Warp Six BBS, created by Jim Ferr
Frank Kucharski, and Scott Johnson
Public domain version 3.0
November 1994.

Setting up a Vote

The vote commands are listed in the sysop portion of the main menu. The system is designed to allow users to vote on one issue by selecting from a numbered menu which you create. Users vote by typing V to vote at the main menu. The system won't let a user vote twice. You inform users a vote is in progress (either by posting a message on a forum or in SYS.NEWS) so that users will know a vote is in progress.

To compile results at any time, use the compile results command, which is the equal sign. The results are saved in a file called 'RESULTS'. To view the results, get into Sysop.Utils and type P to enter a ProDOS command, then 'TYPE RESULTS' (without quotes).

To disable the vote when it has been completed, edit the Vote.Data file so that the first line of the file is contains a zero (0) followed by a carriage return. You could also permanently disable voting by deleting the Voter program from the BBS directory. The system will simply state the voting module is not available if user's enter the V command.


Adding/Changing General and Help Files

As mentioned, the general and help files are kept in the Email directory for the system, in the GEN and HELP directories. The Help file section is only one level deep, while the General file section is two levels deep:

HELP-----F.DATA (holds name of section and number of help files)
         INDEX (menu of available files)
         F1
         F2
         and so on for each help file.

GEN------F.DATA (holds name of area and number of subsections)
         INDEX (subsection menu)
         F1-------F.DATA (holds name of section & number of files in it)
                  INDEX (menu of files in this section)
                  F1
                  F2
                  and so on for each Gen file
         F2-------F.DATA (holds name of section & number of files in it)
                  INDEX (menu of files in this section)
                  F1
                  etc.

The F.DATA file holds FM$, which holds the file section or subsection name, as well as TT, the total number of files (or subsections). Nesting only occurs in the GEN directory, and only one level deep. The INDEX file holds the menu of the files or subsections. The files or subsections are named F1, F2 and so on. Files are always text files, subsections are always directories.

To mount a new file, increment TT in the F.DATA file by one (using a word processor or text editor), and add the name of the file to the INDEX menu. Then save the file under the appropriate file name; F5 for example, if it will be the fifth file in the INDEX menu. You will need some sort of file copy utility. (I recommend Glen Bredon's ProSEL as a good low-cost set of valuable utilities.)

To mount a new section, increment TT in the GEN/F.DATA file and add the section name to the GEN/INDEX file. Then create the section directory, Fn, where 'n' is the section number, and create an F.DATA and INDEX file in that directory, holding the section name, number of files, and menu.

I commonly do these activities remotely, getting into the Transfer section and entering P for ProDOS command and then PREFIX /W6/GEN/F2 for example, to get into general file section two. I then upload new files via Xmodem and use the C)reate text file option in Sysop.Utils to change the Titles and F.DATA files. Once you are familiar with the file formats, it's quite easy to do.


Adding Forums to the System

There is a recommended maximum of 20 forums but you can add more if you desire. If you do choose to add more than 20 forums to your system, the forum queue feature will quit working. The system will not crash but will operate just as it did in version 2.5.

Adding forums is easy, because the process is menu driven. Choose A)dd a forum from the sysop utilities (accessible by entering * from the Main command level). You will be prompted for the forum's name, eg. The Main Forum, the minimum security level required for entry (usually 2), and the minimum security level required to write bulletins (again, usually 2). (Level 0 is unvalidated, 1 is de-validated, 2 is normal, 3-7 are for your use, 8 is co-sysop and 9 is sysop.)

You will be asked to set the bulletin limit, which will determine how many bulletins can be posted before one is automatically deleted. Each forum can hold hundreds of bulletins to a maximum of 9999. (The bigger the directory, the longer it will take ProDOS 8 to find each message, as messages are stored in separate files.) Feel free to experiment with the maximum number.  A typical value would be 300.

Next, you will be asked which bulletin you'd like to be deleted when the limit is reached. With PD version 1.0 and later, you may not set this higher than message number 1. If you leave this at zero, messages will not be deleted when the maximum is reached, and the system will report the forum is "full", and you or your co-sysops (if any) will have to delete bulletins using the D)elete command before new bulletins can be posted in the forum that is full.

Forums contain a number of data files. The INTRO file is the opening message users see when entering the forum. (Note that they don't see this when using Quickscan.) The DATA.F file holds information about the forum. Finally, the DATA.U file keeps track of the highest bulletin number each user read last, for new, Quickscan and spool. See the file descriptions for more detail.

Here is the description of the DATA.F file, also described in Warp6.Doc:

DATA.F, type TXT (set up by the Add.a.Forum module in Sysop.Utils)

FM$   Forum name
ES    Entry security (min.) 0-9
WS    Write security (min.) 0-9
MO    Members only flag (0-1)
BL    Bulletin limit - max. number of messages in this forum (4-9999)
FD    Auto-delete 1st message if FD=1, forum is full if BL reached and FD=0
FB    refnum of 1st msg. posted in this forum
LB    refnum of last msg. posted in this forum
TT    total number of messages in this forum
FA    Alias flag for forum. 1=aliases allowed. 0=real name only

To delete a forum, you must remove its menu item from the FORUM.NAMES file and delete all the files in the forum. Then you must rename any forums necessary so they are all in sequential order from FORUM.1 to FORUM.n, where n is your last remaining forum. Finally, decrement the forum count variable (FC) in the SYS.DATA file. Example: If FC has a value of 4, change it to a 3 in the SYS.DATA. Please note: if you enter a new copy of the SYS.DATA while online, you must restart the system from the Sysop.Utils by entering P for ProDOS command and '-LOGON' (no quotes) to prevent SYS.DATA being re-written automatically by the system when you logoff.


File transfers via Xmodem and Ymodem

You can transfer files to and from the system and any ProDOS mounted volumes attached to it via Xmodem (or Ymodem for downloads only), in the T)ransfer section. You can even upload program changes, by first setting the ProDOS prefix to the directory holding the BBS programs. To update any program you must first delete it, then upload the new version with either ProDOS or Binary II extensions active. Note: updating programs online is not for the unwary. When downloading, Ymodem batch is very useful for getting multiple files in one session. I use ProTERM 3.0 and tend to set the BBS to send Ymodem with ProDOS extension, which doesn't add any overhead to the received file because the ProDOS information is in the Ymodem filename packet.


Maintaining the USERS file

The USERS file maintains itself, actually, but you need to help out a bit, by validating new users, deleting stale ID's, and editing user ID's when people need to be promoted, or change their city or phone number. It's all done from the Sysop.Util program, accessible from the main command level by typing an asterisk. In fact, you can give some trusted users co-sysop status to take care of these chores for you. Just update their security levels to level 8 or higher. (Check the appropriate lines for CHAINing to SYSOP.UTIL around line 9200 in Warp6.BBS for exact security level requirements.)

The User purge function is particularly useful, allowing you to delete both new users you haven't validated up to a cutoff date of your own choosing, and stale users that haven't called after a selectable cutoff date. You can use the prompt for deletions option to ensure you don't delete someone you don't want to by mistake, and you should definitely make a backup copy of your USERS and REC.DATA files before running the User Purge function.

Another useful function is the S)ort and create user list utility in the Utils program. Typically, you will run User.Purge and then sort a new user list, as the list is used in the E-Mail section for those who can't remember how to spell a user's name. (See the section below entitled 'Updating the User List'.)

If you want to compile statistics on your users, copy the AWORKS.CONVERT program from the /Extras directory to your /Logs directory and run it. It will create a file called 'AWORKS.USERS' containing your user file in text format that AppleWorks can import.


Doing the System News

The opening message for the BBS is held in the file 'SYS.NEWS', and can be updated directly from the Sysop Utilities by setting the ProDOS prefix to the LOGS directory (use P for ProDOS command) and choosing the C)reate text file option, then saving your file to SYS.NEWS. (I recently fixed a bug that wouldn't let you type in full pathnames, so now you don't have to change the prefix; you can simply save to /HD1/WARP6/LOGS/SYS.NEWS or wherever your Logs directory is located.)

When saving a file you have two options, E)rase and write, which will delete any existing file with the name you chose, or A)ppend, which will add to an existing file or will create a new file if the file does not exist.


Updating the User List

A recent addition to Warp Six allows you to automatically generate a sorted user list. This command is in the Sysop Utilities. (sort)

It's a good idea to update the user list regularly, particularly after purging any old users.

You have the option of sorting by first letter of last name (or alias) only, or a full sort, which does a full alphabetical sort. You also have the option of including or not including the sysop's name (or alias) in the list. Sort times are vastly improved using a shell sort instead of the old bubble sort used in previous versions of Warp6. The larger the user file, the more improvement you will see. 

The sorting method used in version 3.0 is the "shell sort". The program reads all the user names (or aliases) into an array and sorts the array by making several "passes" through the array. Not exactly sure how it works. It swaps multiple elements at the same time and it's screaming fast compared to a bubble sort. When no more swaps need to be done, the sort is complete and the sorted list is written to disk. Each "pass" through the file is listed on the screen.

Due to the DIMensioning of the large arrays for the sort, the program did automatically restart the system when it was complete. This has been fixed with the addition of STORE and RESTORE commands that free the memory upon completion of the sort.

You could use AppleWorks to generate customized user lists by running the Aworks.Convert program (in the Extras directory) outside of Warp Six, from BASIC. This program is useful for transferring all the data in your USERS file to AppleWorks for generating statistics and studying trends or even printing out your own copy of the user list
